<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>旅友WiFi PoC</title>
</head>
<body>

  <h1>旅友WiFi 位置情報PoC</h1>
  <button onclick="sendLocation()">位置情報を送信</button>

  <script>
    function sendLocation() {
      navigator.geolocation.getCurrentPosition(function (position) {
        const latitude = position.coords.latitude;
        const longitude = position.coords.longitude;

        fetch("https://tabitomo-server.onrender.com/location", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            latitude,
            longitude,
            timestamp: new Date().toISOString()
          })
        }).then(() => {
          alert("位置情報送信完了！");
        }).catch(err => {
          console.error("送信失敗:", err);
          alert("送信に失敗しました");
        });
      }, function (error) {
        console.error("位置情報取得失敗:", error);
        alert("位置情報を取得できませんでした");
      });
    }
  </script>

</body>
</html>
